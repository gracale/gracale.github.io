{"id":"6s8z","dependencies":[{"name":"./favicon.ico","dynamic":true,"resolved":"E:\\test\\study\\lottery\\favicon.ico","parent":"E:\\test\\study\\lottery\\index.html"}],"generated":{"html":"<!DOCTYPE html>\r\n<html>\r\n\r\n<head>\r\n    <link rel=\"icon\" href=\"8af3a74ede48e250ceb935c026242483.ico\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>抽奖</title>\r\n\r\n</head>\r\n\r\n<body>\r\n    <h3 style=\"text-align:center;margin-top: 10%;color:white\">抽奖标题</h3>\r\n    <div id=\"container\">\r\n        <ul id=\"list\">\r\n            <!-- img标签放奖品图片 -->\r\n            <!-- mask类为抽奖滚动起来的标记 -->\r\n            <span id=\"startbutton\" onclick=\"startlottery()\" style=\"background-color:#ff3a59;color:white;font-size: 20px;\">抽奖\r\n            </span>\r\n            <li><div class=\"mask\"></div>01</li>\r\n            <li><div class=\"mask\"></div>02</li>\r\n            <li><div class=\"mask\"></div>03</li>\r\n            <li><div class=\"mask\"></div>04</li>\r\n            <li><div class=\"mask\"></div>05</li>\r\n            <li><div class=\"mask\"></div>06</li>\r\n            <li><div class=\"mask\"></div>07</li>\r\n            <li><div class=\"mask\"></div>08</li>\r\n            <li><div class=\"mask\"></div>09</li>\r\n            <li><div class=\"mask\"></div>10</li>\r\n            <li><div class=\"mask\"></div>11</li>\r\n            <li><div class=\"mask\"></div>12</li>\r\n            <li><div class=\"mask\"></div>13</li>\r\n            <li><div class=\"mask\"></div>14</li>\r\n            <li><div class=\"mask\"></div>15</li>\r\n            <li><div class=\"mask\"></div>16</li>\r\n            <li><div class=\"mask\"></div>17</li>\r\n            <li><div class=\"mask\"></div>18</li>\r\n        </ul>\r\n        <div id=\"message\"></div><!-- 获奖信息展示 -->\r\n    </div>\r\n    <div><button id=\"deliver\">移动至获奖名单</button></div>\r\n    <div id=\"picked\">\r\n        获奖名单\r\n        <ul id=\"confirmlist\">\r\n\r\n        </ul>\r\n    </div>\r\n    <style>body {\r\n            background-color: gray;\r\n        }\r\n\r\n        #deliver {\r\n            width: 400px;\r\n            height: 100px;\r\n            float: left;\r\n            text-align: center;\r\n            line-height: 100px;\r\n            position: relative;\r\n            background: #fff;\r\n            margin: 200px 60px;\r\n            border-radius: 5px;\r\n            font-size: 20px;\r\n        }\r\n\r\n        #container {\r\n            width: 600px;\r\n            float: left;\r\n            border: 7px solid black;\r\n            border-radius: 10px;\r\n            padding: 2%;\r\n        }\r\n\r\n        #picked {\r\n            width: 330px;\r\n            float: left;\r\n            border: 7px solid white;\r\n            border-radius: 10px;\r\n            padding: 2%;\r\n        }\r\n\r\n        div ul#confirmlist li {\r\n            width: 100px;\r\n            height: 100px;\r\n            float: left;\r\n            text-align: center;\r\n            line-height: 100px;\r\n            position: relative;\r\n            background-color: #384f9a;\r\n            margin: 1.4%;\r\n            border-radius: 5px;\r\n            list-style-type: none;\r\n        }\r\n\r\n\r\n        #list {\r\n            width: 600px;\r\n            height: 340px;\r\n            list-style: none;\r\n            margin: 0;\r\n            padding: 0;\r\n        }\r\n\r\n        #list li,\r\n        #list span {\r\n            width: 100px;\r\n            height: 100px;\r\n            float: left;\r\n            text-align: center;\r\n            line-height: 100px;\r\n            position: relative;\r\n            background-color: #384f9a;\r\n            margin: 1.4%;\r\n            border-radius: 5px;\r\n        }\r\n\r\n        #list li img {\r\n            display: block;\r\n            width: 100%;\r\n            height: 100%;\r\n        }\r\n\r\n        #list li .mask {\r\n            border: 10px solid red;\r\n            width: 100%;\r\n            height: 100%;\r\n            position: absolute;\r\n            left: -10px;\r\n            top: -10px;\r\n            border-radius: 10px;\r\n            /* opacity: 0.5; */\r\n            /* background-size: cover; */\r\n            opacity: 0.66;\r\n            display: none;\r\n            z-index: 20;\r\n        }\r\n\r\n        #list span:hover {\r\n            cursor: pointer;\r\n            color: orange;\r\n            font-size: 18px;\r\n        }\r\n\r\n        #list .active .mask {\r\n            display: block;\r\n        }\r\n\r\n        #message {\r\n            line-height: 32px;\r\n            color: #9a9a9a;\r\n            text-align: center;\r\n            position: absolute;\r\n            left: 50%;\r\n            top: 50px;\r\n            width: 300px;\r\n            height: 50px;\r\n            margin-left: -150px;\r\n            display: none;\r\n            background: #000;\r\n            color: #fff;\r\n        }</style>\r\n</body>\r\n\r\n<script>var container = document.getElementById('container'),\n    li = container.getElementsByTagName('li'),\n    span = document.getElementById('startbutton'),\n    message = document.getElementById('message'),\n    timer = null;\nbReady = true; //定义一个抽奖开关\n\nvar prize = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17]; //奖品li标签滚动的顺序\n\nvar num = 0; //num用来存放得到的随机函数，也就是抽中的奖品\n//开始抽奖\n\nfunction startlottery() {\n  if (bReady) {\n    //当抽奖开关为true的时候，可点击抽奖\n    message.style.display = \"none\"; //将获奖信息div隐藏（以防止上次抽奖信息还显示）\n\n    span.style.background = \"#ada7a8\";\n    bReady = false; //抽奖开关设为false 处于抽奖中 即不能点击抽奖\n\n    num = getrandomnum(1, 19); //得到一个随机数（即奖品）\n    // console.log(num)\n\n    startinit(num); //执行抽奖初始化\n  }\n} //抽中的奖品 返回1-9的整数，包含1，不包含9\n\n\nfunction getrandomnum(n, m) {\n  return parseInt((m - n) * Math.random() + n);\n} //抽奖初始化\n\n\nfunction startinit(num) {\n  var i = 0; //定义一个i 用来计算抽奖跑动的总次数\n\n  var t = 20; //抽奖跑动的速度 初始为200毫秒\n\n  var rounds = 2; //抽奖转动的圈数\n\n  var rNum = rounds * 18; //标记跑动的次数（这是一个条件判断分界线）\n\n  timer = setTimeout(startscroll, t); //每t毫秒执行startscroll函数\n  //抽奖滚动的函数\n\n  function startscroll() {\n    //每次滚动抽奖将所有li的class都设为空\n    for (var j = 0; j < li.length; j++) {\n      li[j].className = '';\n    }\n\n    var prizenum = prize[i % li.length]; //通过i余18得到此刻在prize数组中的数字，该数字就是mask标记出现的位置\n\n    li[prizenum].className = \"active\";\n    i++;\n\n    if (i < rNum - 10) {\n      //当i小于转(rNum-8次)的数量，t不变还是20毫秒\n      timer = setTimeout(startscroll, t); //继续执行抽奖滚动\n    } else if (i >= rNum - 10 && i < rNum + num) {\n      //t时间变长，此时计时器运行速度降低，同时标签刷新速度也降低\n      t += (i - rNum + 10) * 2;\n      timer = setTimeout(startscroll, t); //继续执行抽奖滚动\n    }\n\n    if (i >= rNum + num) {\n      //当i大于转rNum加随机数字num次计时器结束，出现提示框提示中奖信息\n      var declare = document.getElementsByClassName('active')[0].innerText;\n      message.innerHTML = '恭喜' + declare;\n      setTimeout(function () {\n        message.style.display = \"block\"; //公告栏为显示状态,延时是为了先框住再展示结果\n\n        if (message.style.display === \"block\") {\n          deliver.style.background = \"red\";\n        }\n      }, 800);\n\n      deliver.onclick = function () {\n        //把获奖者挪到右边才能继续抽奖\n        var move = document.getElementsByClassName('active')[0];\n        var confirmlist = document.getElementById('confirmlist');\n        confirmlist.appendChild(move);\n        move.classList.replace(\"active\", \"static\"); //把选中的li class改成静态\n        // let static = confirmlist.getElementsByClassName('static')[0]\n        // let del = document.getElementsByClassName('static')[0];\n        // del.removeChild(del.lastElementChild);\n\n        setTimeout(function () {\n          var lis = document.getElementById('confirmlist').getElementsByTagName('li').length;\n          var del = document.getElementsByClassName('static')[lis - 1];\n          del.removeChild(del.firstChild);\n        }, 0);\n        var timer2 = null;\n        timer2 = setTimeout(function () {\n          span.style.background = \"#ff3a59\";\n          clearTimeout(timer2);\n          message.style.display = \"\";\n          deliver.style.background = \"white\";\n        }, 100);\n        bReady = true; //当计时器结束后让span标签变为抽奖状态\n      };\n\n      clearTimeout(timer);\n    }\n  }\n}</script>\r\n\r\n</html>"},"sourceMaps":null,"error":null,"hash":"3eecf84b14866388f0748a2ae5bf4a1b","cacheData":{"env":{}}}